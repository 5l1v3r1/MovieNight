{{define "header"}}
{{ if .Chat }}
<script type="application/javascript" src="/static/js/wasm_exec.js"></script>
<script type="application/javascript" src="/static/js/chat.js"></script>
<script>
    maxMessageCount = {{ .MessageHistoryCount }}
</script>
<style>
    .root {
        display: grid;
    }
</style>
{{ end }}

{{ if .Video }}
<script type="application/javascript" src="/static/js/flv.min.js"></script>
<script type="application/javascript" src="/static/js/video.js"></script>
{{ if not .Chat }}
<style>
    #videoElement {
        height: 99vh;
    }
</style>
{{ end }}
{{ end }}

{{ if and .Video .Chat }}
<style>
    .root {
        grid-template-columns: 5fr 1fr;
    }
</style>
{{ end }}
{{end}}

{{define "body"}}
{{ if .Video }}
<video id="videoElement" controls autoplay x5-video-player-type="h5" x5-video-player-fullscreen="true" playsinline
    webkit-playsinline>
    Your browser is too old and doesn't support HTML5 video.
</video>
{{ end }}

{{ if .Chat }}
<div id="chatwindow">
    <div id="notifyBox"></div>
    <div id="chat" style="display: none;">
        <input id="hiddenColorPicker" type="color" hidden />
        <div id="optionBox">Please hover to view options</div>
        <div id="hidden">
            <div id="chatButtons">
                <button class="button pretty-button" onclick="auth();">Auth</button>
                <button class="button pretty-button" onclick="help();">Help</button>
                <button class="button pretty-button" onclick="$('#hiddenColorPicker').trigger('click');">Color</button>
                <button class="button pretty-button" onclick="nick();">Nick</button>
                {{ if .Video }}
                <button class="button pretty-button" onclick="initPlayer();">Reload Player</button>
                {{ end }}
            </div>
            <hr />
            <div id="accessRequest">
                <div class="access-title" noclear>Grant Access?</div>
                <div>
                    <button class="button pretty-button access-grant">✔</button>
                    <button class="button pretty-button access-ignore">✘</button>
                    <span class="access-name">User1</span>
                </div>
                <div>
                    <button class="button pretty-button access-grant">✔</button>
                    <button class="button pretty-button access-ignore">✘</button>
                    <span class="access-name">User2</span>
                </div>
                <div>
                    <button class="button pretty-button access-grant">✔</button>
                    <button class="button pretty-button access-ignore">✘</button>
                    <span class="access-name">User3</span>
                </div>
            </div>
        </div>
        <a id="playing" target="_blank"></a>
        <div id="messages" class="scrollbar"></div>
        <div id="msgbox">
            <div id="suggestions"></div>
            <textarea id="msg"></textarea>
        </div>
        <button id="send" class="button" onclick="sendChat();">Send</button>
        <div>
            <!-- This is an empty div so there can be an empty space below the send button -->
        </div>
    </div>
    <div id="joinbox">
        <div style="color: #e5e0e5; text-align: center;">Please enter your name<br />to join the chat</div>
        <div>
            <input id="name" maxlength="36">
            <button id="join" class="button pretty-button" onclick="join();">Join</button>
        </div>
    </div>
</div>
{{ end }}
{{end}}